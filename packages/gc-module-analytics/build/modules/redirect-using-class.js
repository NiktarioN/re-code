(()=>{var o=new URL(window.location.href),n=e=>new URL(e,o.origin),m=(e,r)=>n(e).searchParams.has(r);var u=e=>{let r=n(e);return new URLSearchParams(r.search)};var h=(e,r=[])=>{let t=n(e);return r.forEach(([s,a])=>{t.searchParams.set(s,a)}),t};var P=["page","show"],c={offerSettings:["/pl/sales/offer/update","/pl/sales/offer/create"],userDealsPage:["/sales/control/userProduct/my"],cms:{editor:["/pl/cms/page"]}},L=c.offerSettings.some(e=>o.pathname.includes(e)),b=c.userDealsPage.some(e=>o.pathname.includes(e)),v=c.cms.editor.some(e=>o.pathname.includes(e))||m(o.href,"editMode"),f=window.self!==window.top,D=P.some(e=>window?.controllerId===e);var{isAdmin:E,isTeacher:_}=window.userInfo;var i={"location.href":"current-window","window.open":"new-window"},S={"new-window":e=>window.open(e,"_blank"),"current-window":e=>{f?window.top.location.href=e:window.location.href=e}},w=(e,r)=>{let t=n(e),s=S[r];s(t)};var g=()=>{let e=".recode-transfer-params";document.querySelectorAll(e).forEach(r=>{let t=r.querySelector("button"),s=r.querySelector("script");if(!t||!s)return;let a=s.innerHTML.match(/(?:location\.href\s*=\s*['"]([^'"]+)['"]|window\.open\s*\(\s*['"]([^'"]+)['"])/);if(!a)return;let l={method:a[1]?i["location.href"]:i["window.open"],value:a[1]||a[2]||""},d=t.cloneNode(!0);t.parentNode.replaceChild(d,t),d.addEventListener("click",p=>{p.preventDefault(),w(h(l.value,[...u(o.href)]).href,l.method)})})},V=g;})();
