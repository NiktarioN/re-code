(()=>{var t=new URL(window.location.href),o=e=>new URL(e,t.origin),n=(e,r)=>o(e).searchParams.has(r),h=(e,r)=>o(e).searchParams.get(r);var d=(e,r=[])=>{let a=o(e),c=[...new URLSearchParams(a.search)].filter(([m])=>r.some(l=>m===l));return new URLSearchParams(c)};var P=["page","show"],i={offerSettings:["/pl/sales/offer/update","/pl/sales/offer/create"],userDealsPage:["/sales/control/userProduct/my"],cms:{editor:["/pl/cms/page"]}},U=i.offerSettings.some(e=>t.pathname.includes(e)),y=i.userDealsPage.some(e=>t.pathname.includes(e)),$=i.cms.editor.some(e=>t.pathname.includes(e))||n(t.href,"editMode"),u=window.self!==window.top,R=P.some(e=>window?.controllerId===e);var f={full:!0,clean:!1},{isAdmin:L,isTeacher:D}=window.userInfo;var M=document.referrer||"none",p=n(t.href,"loc")?new URL(h(t.href,"loc")).href:t.href,b="user",g=e=>{let r=o(e),a=d(r.href,["id"]);return a.toString()?`${r.origin}${r.pathname}?${a}`:`${r.origin}${r.pathname}`},C=u?g(t.href):"none",k=()=>{let e={timeZone:"Europe/Moscow",day:"numeric",month:"numeric",year:"numeric"},r=new Date().toLocaleString("ru-RU",e),[a,s,c]=r.split(".").map(Number),m=a<10?`0${a}`:a,l=s<10?`0${s}`:s;return`${m}.${l}.${c}`},v=e=>{let r=new URL(u?p:t.href),a=g(r.href);return f[e]?r.href:a||"none"};})();
