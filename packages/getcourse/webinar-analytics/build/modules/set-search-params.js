(()=>{var o=new URL(window.location.href),i=e=>new URL(e,o.origin),d=(e,t)=>i(e).searchParams.has(t);var f=e=>{let t=i(e);return new URLSearchParams(t.search)};var S=(e,t=[])=>{let r=i(e);return t.forEach(([a,n])=>{r.searchParams.set(a,n)}),r},P=(e,t=[])=>{let r=i(e);return[...typeof t=="string"?[t]:t].forEach(a=>{r.searchParams.delete(a)}),r};var m=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];var k=["page","show"],h={offerSettings:["/pl/sales/offer/update","/pl/sales/offer/create"],userDealsPage:["/sales/control/userProduct/my"],cms:{editor:["/pl/cms/page"]}},y=h.offerSettings.some(e=>o.pathname.includes(e)),$=h.userDealsPage.some(e=>o.pathname.includes(e)),I=h.cms.editor.some(e=>o.pathname.includes(e))||d(o.href,"editMode"),x=window.self!==window.top,D=k.some(e=>window?.controllerId===e),u="data-recode-value-set";var{isAdmin:F,isTeacher:M}=window.userInfo;var L=e=>{let t=[{elementSelector:"a[href]",elementAttributeLink:"href"}],r=(n,c)=>{[...document.querySelectorAll(`${n}:not([${u}])`)].filter(l=>/^(https?:\/)?\/.+/i.test(l.getAttribute(c))).forEach(l=>{let s=l.getAttribute(c);m.filter(b=>[...f(s).keys()].some(E=>b===E)).length>e.length&&(s=P(s,m).href),s=S(s,e);let{href:g,origin:p,pathname:w,search:A,hash:U}=s;l.setAttribute(c,window.location.origin===p?`${w}${A}${U}`:g),l.setAttribute(u,"")})},a=()=>{t.forEach(({elementSelector:n,elementAttributeLink:c})=>r(n,c,e))};a(e),setInterval(()=>{a(e)},1e3)},q=L;})();
