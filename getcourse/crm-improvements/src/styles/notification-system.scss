$notification-z-index: 10000;
$notification-max-width: 400px;
$notification-margin: 10px;
$notification-padding: 16px 20px;
$notification-border-radius: 8px;
$notification-border-width: 4px;
$notification-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
$notification-font-size: 12px;
$notification-line-height: 1.4;
$animation-duration: 0.3s;
$container-max-height: calc(100vh - 40px);

$colors: (
	error: (
		border: #e74c3c,
		background: #fdf2f2,
	),
	warning: (
		border: #f39c12,
		background: #fefbf3,
	),
	info: (
		border: #3498db,
		background: #f0f8ff,
	),
	success: (
		border: #27ae60,
		background: #f0fff4,
	),
);

$text-colors: (
	primary: #2c3e50,
	secondary: #34495e,
	muted: #7f8c8d,
);

// Миксины
@mixin flex-center {
	display: flex;
	align-items: center;
	justify-content: center;
}

@mixin button-reset {
	background: none;
	border: none;
	cursor: pointer;
	padding: 0;
}

@mixin mobile-breakpoint {
	@media (max-width: 480px) {
		@content;
	}
}

@mixin custom-scrollbar {
	scrollbar-width: thin;
	scrollbar-color: rgba(0, 0, 0, 0.3) transparent;

	&::-webkit-scrollbar {
		width: 6px;
	}

	&::-webkit-scrollbar-track {
		background: transparent;
	}

	&::-webkit-scrollbar-thumb {
		background: rgba(0, 0, 0, 0.3);
		border-radius: 3px;

		&:hover {
			background: rgba(0, 0, 0, 0.5);
		}
	}
}

// Анимации
@keyframes recode-slide-in-desktop {
	from {
		transform: translateX(400px);
		opacity: 0;
	}
	to {
		transform: translateX(0);
		opacity: 1;
	}
}

@keyframes recode-slide-out-desktop {
	from {
		transform: translateX(0);
		opacity: 1;
	}
	to {
		transform: translateX(400px);
		opacity: 0;
	}
}

@keyframes recode-slide-in-mobile {
	from {
		transform: translateY(-100px);
		opacity: 0;
	}
	to {
		transform: translateY(0);
		opacity: 1;
	}
}

@keyframes recode-slide-out-mobile {
	from {
		transform: translateY(0);
		opacity: 1;
	}
	to {
		transform: translateY(-100px);
		opacity: 0;
	}
}

.recode-notification-container {
	position: fixed;
	top: 20px;
	right: 20px;
	z-index: $notification-z-index;
	max-width: $notification-max-width;
	max-height: $container-max-height;
	pointer-events: none;
	overflow-y: auto;
	overflow-x: hidden;
	@include custom-scrollbar;

	// Прозрачные отступы для красивого скролла
	padding-bottom: 10px;

	@include mobile-breakpoint {
		left: $notification-margin;
		right: $notification-margin;
		top: 10px;
		max-width: none;
		max-height: calc(100vh - 20px);
	}

	// Скрываем скроллбар при отсутствии hover на мобильных
	@media (hover: none) {
		scrollbar-width: none;

		&::-webkit-scrollbar {
			display: none;
		}
	}
}

.recode-notification {
	background: white;
	border-radius: $notification-border-radius;
	box-shadow: $notification-shadow;
	margin-bottom: $notification-margin;
	padding: $notification-padding;
	position: relative;
	pointer-events: auto;
	border-left: $notification-border-width solid;
	// font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
	font-size: $notification-font-size;
	line-height: $notification-line-height;
	word-wrap: break-word;
	transform: translateX(400px);
	opacity: 0;
	animation: recode-slide-in-desktop $animation-duration ease-out forwards;

	@include mobile-breakpoint {
		transform: translateY(-100px);
		animation: recode-slide-in-mobile $animation-duration ease-out forwards;
		margin-bottom: 8px;
		padding: 12px 16px;
	}

	&:last-child {
		margin-bottom: 0;
	}

	&--removing {
		animation: recode-slide-out-desktop $animation-duration ease-in forwards;

		@include mobile-breakpoint {
			animation: recode-slide-out-mobile $animation-duration ease-in forwards;
		}
	}

	// Типы уведомлений
	@each $type, $color-map in $colors {
		&--#{$type} {
			border-left-color: map-get($color-map, border);
			background: map-get($color-map, background);
		}
	}
}

.recode-notification__header {
	display: flex;
	align-items: center;
	margin-bottom: 8px;
	font-size: 14px;
	font-weight: 600;
	color: map-get($text-colors, primary);

	@include mobile-breakpoint {
		margin-bottom: 6px;
		font-size: 13px;
	}
}

.recode-notification__icon {
	width: 20px;
	height: 20px;
	margin-right: 8px;
	flex-shrink: 0;

	@include mobile-breakpoint {
		width: 18px;
		height: 18px;
		margin-right: 6px;
	}
}

.recode-notification__body {
	color: map-get($text-colors, secondary);
	white-space: pre-line;
	padding-right: 24px;

	@include mobile-breakpoint {
		line-height: 1.3;
		padding-right: 20px;
		padding-right: 20px;
	}
}

.recode-notification__close {
	@include button-reset;
	@include flex-center;

	position: absolute;
	top: 8px;
	right: 8px;
	font-size: 18px;
	color: map-get($text-colors, muted);
	width: 24px;
	height: 24px;
	border-radius: 4px;
	transition: background-color 0.2s ease;

	@include mobile-breakpoint {
		top: 6px;
		right: 6px;
		width: 20px;
		height: 20px;
		font-size: 16px;
	}

	&:hover {
		background-color: rgba(0, 0, 0, 0.1);
	}

	&:focus {
		outline: 2px solid #3498db;
		outline-offset: 1px;
	}

	&:active {
		background-color: rgba(0, 0, 0, 0.15);
		transform: scale(0.95);
	}
}

// Градиент снизу для индикации возможности прокрутки
.recode-notification-container::after {
	content: '';
	position: sticky;
	bottom: 0;
	left: 0;
	right: 0;
	height: 20px;
	background: linear-gradient(transparent, rgba(255, 255, 255, 0.8));
	pointer-events: none;
	opacity: 0;
	transition: opacity 0.3s ease;
}

// Показываем градиент только когда есть прокрутка
.recode-notification-container:hover::after {
	opacity: 1;
}

@media (hover: none) {
	.recode-notification-container::after {
		display: none;
	}
}

// Дополнительные стили для доступности
@media (prefers-reduced-motion: reduce) {
	.recode-notification {
		animation-duration: 0.1s;
	}

	.recode-notification--removing {
		animation-duration: 0.1s;
	}
}

// Высокая контрастность
@media (prefers-contrast: high) {
	.recode-notification {
		border-width: 6px;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
	}

	.recode-notification__close {
		border: 1px solid currentColor;
	}
}

// Темная тема
@media (prefers-color-scheme: dark) {
	.recode-notification {
		background: #2c3e50;
		color: #ecf0f1;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
	}

	.recode-notification__header {
		color: #ecf0f1;
	}

	.recode-notification__body {
		color: #bdc3c7;
	}

	.recode-notification__close {
		color: #95a5a6;

		&:hover {
			background-color: rgba(255, 255, 255, 0.1);
		}
	}

	// Темные цвета для типов уведомлений
	.recode-notification--error {
		background: #2d1b1b;
	}

	.recode-notification--warning {
		background: #2d2519;
	}

	.recode-notification--info {
		background: #1a252d;
	}

	.recode-notification--success {
		background: #1b2d1f;
	}

	// Градиент для темной темы
	.recode-notification-container::after {
		background: linear-gradient(transparent, rgba(44, 62, 80, 0.8));
	}
}
