(()=>{var t=new URL(window.location.href),l=e=>new URL(e,t.origin),u=(e,r)=>l(e).searchParams.has(r),m=(e,r)=>l(e).searchParams.get(r);var g=(e,r=[])=>{let a=l(e),s=[...new URLSearchParams(a.search)].filter(([c])=>r.some(n=>c===n));return new URLSearchParams(s)};var V=["page","show"],i={offerSettings:["/pl/sales/offer/update","/pl/sales/offer/create"],userDealsPage:["/sales/control/userProduct/my"],cms:{editor:["/pl/cms/page"]}},b=i.offerSettings.some(e=>t.pathname.includes(e)),v=i.userDealsPage.some(e=>t.pathname.includes(e)),x=i.cms.editor.some(e=>t.pathname.includes(e))||u(t.href,"editMode"),d=window.self!==window.top,A=V.some(e=>window?.controllerId===e),h="data-recode-value-set",p={full:!0,clean:!1},{isAdmin:M,isTeacher:I}=window.userInfo;var P=document.referrer||"none",_=u(t.href,"loc")?new URL(m(t.href,"loc")).href:t.href,S="user",w=e=>{let r=l(e),a=g(r.href,["id"]);return a.toString()?`${r.origin}${r.pathname}?${a}`:`${r.origin}${r.pathname}`},U=d?w(t.href):"none",y=()=>{let e={timeZone:"Europe/Moscow",day:"numeric",month:"numeric",year:"numeric"},r=new Date().toLocaleString("ru-RU",e),[a,o,s]=r.split(".").map(Number),c=a<10?`0${a}`:a,n=o<10?`0${o}`:o;return`${c}.${n}.${s}`},f=e=>{let r=new URL(d?_:t.href),a=w(r.href);return p[e]?r.href:a||"none"};var R={getValue:e=>{try{return decodeURIComponent(document.cookie.match(new RegExp(`(?:^|; )${e.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")}=([^;]*)`))[1])}catch{return}}},{getValue:C}=R,$=C;var k=e=>{switch(e){case"referrer":return P;case"url_full":return f("full");case"url_clean":return f("clean");case"created_date":return y();case"created_type":return S;case"widget_url":return U;default:return null}},E=(e,r)=>{switch(e){case"param":return m(t.href,r);case"cookie":return $(r);case"other":return k(r);default:return null}},L=e=>{let r=()=>{e.forEach(({fieldSelector:a,valueType:o,trigger:s})=>{document.querySelectorAll(`${a}:not([${h}])`).forEach(c=>{let n=c;n.value=E(o,s)??"",n.setAttribute(h,"")})})};r(),setInterval(()=>{r()},1e3)},j=L;})();
