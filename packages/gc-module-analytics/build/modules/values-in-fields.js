(()=>{var t=new URL(window.location.href),u=r=>new URL(r,t.origin),l=(r,e)=>u(r).searchParams.has(e),i=(r,e)=>u(r).searchParams.get(e);var p=(r,e=[])=>{let a=u(r),s=[...new URLSearchParams(a.search)].filter(([c])=>e.some(n=>c===n));return new URLSearchParams(s)};var R=["page","show"],m={offerSettings:["/pl/sales/offer/update","/pl/sales/offer/create"],userDealsPage:["/sales/control/userProduct/my"],cms:{editor:["/pl/cms/page"]}},k=m.offerSettings.some(r=>t.pathname.includes(r)),F=m.userDealsPage.some(r=>t.pathname.includes(r)),A=m.cms.editor.some(r=>t.pathname.includes(r))||l(t.href,"editMode"),d=window.self!==window.top,T=R.some(r=>window?.controllerId===r),h="data-recode-value-set",g={full:!0,clean:!1},{isAdmin:I,isTeacher:O}=window.userInfo;var w=document.referrer||"none",V=l(t.href,"loc")?new URL(i(t.href,"loc")).href:t.href,P="user",S=r=>{let e=u(r),a=p(e.href,["id"]);return a.toString()?`${e.origin}${e.pathname}?${a}`:`${e.origin}${e.pathname}`},U=d?S(t.href):"none",y=()=>{let r={timeZone:"Europe/Moscow",day:"numeric",month:"numeric",year:"numeric"},e=new Date().toLocaleString("ru-RU",r),[a,o,s]=e.split(".").map(Number),c=a<10?`0${a}`:a,n=o<10?`0${o}`:o;return`${c}.${n}.${s}`},_=()=>{let r={timeZone:"Europe/Moscow",hour:"numeric"},e=Number(new Date().toLocaleString("ru-RU",r));return e>=0&&e<6?"\u041D\u043E\u0447\u044C":e>=6&&e<12?"\u0423\u0442\u0440\u043E":e>=12&&e<18?"\u0414\u0435\u043D\u044C":e>=18&&e<=23?"\u0412\u0435\u0447\u0435\u0440":""},$=()=>{let r=window.matchMedia("(max-width: 767px)"),e=window.matchMedia("(min-width: 768px) and (max-width: 1023px)");return r.matches?"\u041C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E":e.matches?"\u041F\u043B\u0430\u043D\u0448\u0435\u0442":"\u041F\u041A"},f=r=>{let e=new URL(d?V:t.href),a=S(e.href);return g[r]?e.href:a||"none"};var x={getValue:r=>{try{return decodeURIComponent(document.cookie.match(new RegExp(`(?:^|; )${r.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")}=([^;]*)`))[1])}catch{return}}},{getValue:M}=x,D=M;var C=r=>{switch(r){case"referrer":return w;case"url_full":return f("full");case"url_clean":return f("clean");case"created_date":return y();case"part_of_day":return _();case"created_type":return P;case"widget_url":return U;case"device_type":return $();case"script_completed":return"1";default:return null}},b=(r,e)=>{switch(r){case"param":return i(t.href,e);case"cookie":return D(e);case"other":return C(e);default:return null}},v=r=>{let e=()=>{r.forEach(({fieldSelector:a,valueType:o,trigger:s})=>{document.querySelectorAll(`${a}:not([${h}])`).forEach(c=>{let n=c;n.value=b(o,s)??"",n.setAttribute(h,"")})})};e(),setInterval(()=>{e()},1e3)},j=v;})();
